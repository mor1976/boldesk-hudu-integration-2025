async function getAssets() {
    document.getElementById('assetsResult').innerHTML = '<div class="loading">מחפש נכסים...</div>';
    try {
        const response = await fetch('/api/hudu/person-assets', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ personId: currentPersonId })
        });
        const data = await response.json();
        
        // בדיקה בטוחה של המערך
        const assets = data.assets || [];
        
        if (assets.length > 0) {
            const html = assets.map(asset => `
                <div style="background: #e3f2fd; padding: 10px; margin: 5px;">
                    <strong>${asset.name || 'שם לא ידוע'}</strong><br>
                    סוג: ${asset.asset_type || 'לא צוין'}<br>
                    <a href="${asset.url}" target="_blank">פתח</a>
                </div>
            `).join('');
            document.getElementById('assetsResult').innerHTML = `<div class="success">✅ ${assets.length} נכסים: ${html}</div>`;
        } else {
            document.getElementById('assetsResult').innerHTML = '<div class="success">ℹ️ לא נמצאו נכסים מקושרים</div>';
        }
    } catch (error) {
        document.getElementById('assetsResult').innerHTML = `<div class="error">❌ שגיאה: ${error.message}</div>`;
    }
}
